<!DOCTYPE html>
<html lang="pt-BR">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
  <meta name="mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="theme-color" content="#0a0a0a">
  <title>Supernatural AR</title>

  <!-- A-Frame -->
  <script src="https://aframe.io/releases/1.6.0/aframe.min.js"></script>

  <!-- Google Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link href="https://fonts.googleapis.com/css2?family=Creepster&family=Inter:wght@400;500;600;700&display=swap"
    rel="stylesheet">

  <!-- Leaflet Maps -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

  <link rel="stylesheet" href="/src/styles/main.css">
</head>

<body>
  <!-- ========================================
       TELA: SPLASH
       ======================================== -->
  <div id="screen-splash" class="screen active">
    <div class="splash-content">
      <div class="splash-logo">
        <span class="pentagram">â›§</span>
        <h1 class="game-title">SUPERNATURAL</h1>
        <p class="game-subtitle">HUNTERS AR</p>
      </div>
      <div class="splash-loading">
        <div class="loading-bar">
          <div class="loading-fill" id="splash-progress"></div>
        </div>
        <p class="loading-text" id="splash-status">Carregando...</p>
      </div>
    </div>
  </div>

  <!-- ========================================
       TELA: HOME (Base de OperaÃ§Ãµes)
       ======================================== -->
  <div id="screen-home" class="screen hidden">
    <div class="home-header">
      <div class="player-info">
        <div class="player-avatar">ğŸ§”</div>
        <div class="player-details">
          <span class="player-name">CaÃ§ador</span>
          <span class="player-level">NÃ­vel 1</span>
        </div>
      </div>
      <button class="btn-icon" id="btn-profile">âš™ï¸</button>
    </div>

    <div class="home-title">
      <span class="pentagram-small">â›§</span>
      <h2>Base de OperaÃ§Ãµes</h2>
    </div>

    <div class="home-menu">
      <button class="menu-card primary" id="btn-start-hunt">
        <span class="menu-icon">ğŸ¯</span>
        <span class="menu-label">Iniciar CaÃ§ada</span>
        <span class="menu-desc">Modo AR - CaÃ§ar monstros</span>
      </button>

      <div class="menu-grid">
        <button class="menu-card" id="btn-map">
          <span class="menu-icon">ğŸ—ºï¸</span>
          <span class="menu-label">Mapa</span>
        </button>
        <button class="menu-card" id="btn-inventory">
          <span class="menu-icon">ğŸ’</span>
          <span class="menu-label">InventÃ¡rio</span>
        </button>
        <button class="menu-card" id="btn-bestiary">
          <span class="menu-icon">ğŸ“–</span>
          <span class="menu-label">Casos</span>
        </button>
        <button class="menu-card" id="btn-diary">
          <span class="menu-icon">ğŸ““</span>
          <span class="menu-label">DiÃ¡rio</span>
        </button>
      </div>
    </div>

    <div class="home-stats">
      <div class="stat-item">
        <span class="stat-value" id="stat-monsters">0</span>
        <span class="stat-label">Monstros</span>
      </div>
      <div class="stat-item">
        <span class="stat-value" id="stat-hunts">0</span>
        <span class="stat-label">CaÃ§adas</span>
      </div>
      <div class="stat-item">
        <span class="stat-value" id="stat-items">0</span>
        <span class="stat-label">Itens</span>
      </div>
    </div>
  </div>

  <!-- ========================================
       TELA: MAPA
       ======================================== -->
  <div id="screen-map" class="screen hidden">
    <div class="screen-header">
      <button class="btn-back" id="btn-back-map">â†</button>
      <h2>ğŸ—ºï¸ Mapa</h2>
    </div>
    <div class="map-container" id="map-container">
      <div id="full-map"></div>
    </div>
    <div class="map-legend">
      <div class="legend-item"><span class="dot red"></span> Monstros</div>
      <div class="legend-item"><span class="dot yellow"></span> Loot</div>
      <div class="legend-item"><span class="dot blue"></span> VocÃª</div>
    </div>
  </div>

  <!-- ========================================
       TELA: INVENTÃRIO (Full)
       ======================================== -->
  <div id="screen-inventory" class="screen hidden">
    <div class="screen-header">
      <button class="btn-back" id="btn-back-inventory">â†</button>
      <h2>ğŸ’ InventÃ¡rio</h2>
    </div>
    <div class="inventory-tabs-full">
      <button class="inv-tab active" data-tab="weapons">âš”ï¸ Armas</button>
      <button class="inv-tab" data-tab="accessories">ğŸ”§ AcessÃ³rios</button>
      <button class="inv-tab" data-tab="healing">ğŸ’Š Cura</button>
    </div>
    <div class="inventory-content" id="inventory-full-grid">
      <!-- Items renderizados via JS -->
    </div>
  </div>

  <!-- ========================================
       TELA: BESTIÃRIO (Casos)
       ======================================== -->
  <div id="screen-bestiary" class="screen hidden">
    <div class="screen-header">
      <button class="btn-back" id="btn-back-bestiary">â†</button>
      <h2>ğŸ“– Casos</h2>
    </div>
    <div class="bestiary-list" id="bestiary-list">
      <!-- Monstros renderizados via JS -->
    </div>
  </div>

  <!-- ========================================
       TELA: DIÃRIO
       ======================================== -->
  <div id="screen-diary" class="screen hidden">
    <div class="screen-header">
      <button class="btn-back" id="btn-back-diary">â†</button>
      <h2>ğŸ““ DiÃ¡rio</h2>
    </div>
    <div class="diary-entries" id="diary-entries">
      <div class="diary-empty">
        <p>ğŸ“ Seu diÃ¡rio estÃ¡ vazio</p>
        <p class="small">Eventos de caÃ§ada aparecerÃ£o aqui</p>
      </div>
    </div>
  </div>

  <!-- ========================================
       TELA: PERFIL
       ======================================== -->
  <div id="screen-profile" class="screen hidden">
    <div class="screen-header">
      <button class="btn-back" id="btn-back-profile">â†</button>
      <h2>âš™ï¸ Perfil</h2>
    </div>
    <div class="profile-content">
      <div class="profile-card">
        <div class="profile-avatar">ğŸ§”</div>
        <input type="text" class="profile-name-input" id="profile-name" placeholder="Nome do CaÃ§ador" value="CaÃ§ador">
      </div>
      <div class="profile-stats">
        <h3>EstatÃ­sticas</h3>
        <div class="stat-row">
          <span>Monstros derrotados</span>
          <span id="profile-monsters">0</span>
        </div>
        <div class="stat-row">
          <span>CaÃ§adas realizadas</span>
          <span id="profile-hunts">0</span>
        </div>
        <div class="stat-row">
          <span>Itens coletados</span>
          <span id="profile-items">0</span>
        </div>
      </div>
      <div class="profile-settings">
        <h3>ConfiguraÃ§Ãµes</h3>
        <div class="setting-row">
          <span>Som</span>
          <label class="toggle">
            <input type="checkbox" id="setting-sound" checked>
            <span class="slider"></span>
          </label>
        </div>
        <div class="setting-row">
          <span>VibraÃ§Ã£o</span>
          <label class="toggle">
            <input type="checkbox" id="setting-vibration" checked>
            <span class="slider"></span>
          </label>
        </div>
      </div>
    </div>
  </div>

  <!-- ========================================
       TELA: HUNT (Modo AR)
       ======================================== -->
  <div id="screen-hunt" class="screen hidden">
    <!-- A-Frame Scene -->
    <a-scene id="ar-scene" vr-mode-ui="enabled: false" embedded
      webxr="requiredFeatures: hit-test, local-floor; optionalFeatures: dom-overlay, anchors; overlayElement: #ar-hud;"
      renderer="colorManagement: true; physicallyCorrectLights: true; alpha: true;" background="color: transparent"
      ar-hit-test="target: #reticle; type: footprint;">

      <a-assets>
        <a-asset-item id="werewolf-model" src="/werewolf.glb"></a-asset-item>
        <a-asset-item id="vampire-model" src="/vampire.glb"></a-asset-item>
        <a-asset-item id="ghost-model" src="/ghost.glb"></a-asset-item>
        <a-asset-item id="demon-model" src="/demon.glb"></a-asset-item>
        <!-- Loot Models -->
        <a-asset-item id="holy-water-model" src="/holy-water.glb"></a-asset-item>
        <a-asset-item id="salt-model" src="/salt.glb"></a-asset-item>
      </a-assets>

      <a-light type="ambient" color="#fff" intensity="0.6"></a-light>
      <a-light type="directional" color="#fff" intensity="0.9" position="1 4 3"></a-light>

      <a-entity id="reticle" visible="false">
        <a-ring color="#00ff00" radius-inner="0.04" radius-outer="0.06" rotation="-90 0 0"
          material="shader: flat; opacity: 0.8;"></a-ring>
      </a-entity>

      <a-entity id="monsters-container"></a-entity>

      <a-entity id="camera-rig">
        <a-camera id="camera" position="0 1.6 0"></a-camera>
      </a-entity>
    </a-scene>

    <!-- Camera Filter Overlay -->
    <div id="camera-filter-overlay" class="camera-filter-overlay"></div>

    <!-- AR HUD Overlay -->
    <div id="ar-hud" class="ar-hud">
      <button class="ar-btn-exit" id="ar-exit">â›§</button>

      <div class="ar-player-hp">
        <span>â¤ï¸</span>
        <div class="hp-bar">
          <div class="hp-fill" id="ar-player-hp-fill"></div>
        </div>
      </div>

      <div class="ar-monster-hp" id="ar-monster-hp">
        <span id="ar-monster-name">Monstro</span>
        <div class="hp-bar">
          <div class="hp-fill enemy" id="ar-monster-hp-fill"></div>
        </div>
      </div>

      <div class="ar-crosshair"></div>
      <div class="ar-hit-feedback" id="ar-hit-feedback"></div>

      <!-- Mini-Mapa Real com Leaflet -->
      <div class="ar-minimap">
        <div id="ar-map"></div>
      </div>

      <div class="ar-location" id="ar-location">
        <span class="street">ğŸ“ Localizando...</span>
      </div>

      <div class="ar-slots">
        <div class="ar-slot weapon" id="ar-slot-weapon" data-type="weapon"><span>ğŸ¤›</span></div>
        <div class="ar-slot accessory" id="ar-slot-accessory" data-type="accessory"><span>â–</span></div>
        <div class="ar-slot healing" id="ar-slot-healing" data-type="healing"><span>â–</span></div>
      </div>

      <button class="ar-btn-fire" id="ar-fire">ğŸ”«</button>

      <!-- Quick Inventory Modal -->
      <div class="ar-inventory-modal" id="ar-inventory-modal">
        <div class="ar-inv-header">
          <span>Equipar Item</span>
          <button id="ar-inv-close">âœ•</button>
        </div>
        <div class="ar-inv-grid" id="ar-inv-grid"></div>
      </div>
    </div>
  </div>

  <script type="module" src="/src/main.js"></script>
</body>

</html>