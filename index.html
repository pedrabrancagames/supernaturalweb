<!DOCTYPE html>
<html lang="pt-BR">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
  <meta name="mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="theme-color" content="#0a0a0a">
  <title>Supernatural AR</title>

  <!-- A-Frame -->
  <script src="https://aframe.io/releases/1.6.0/aframe.min.js"></script>

  <!-- Google Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link
    href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;600&family=Creepster&family=Inter:wght@400;500;600;700&display=swap"
    rel="stylesheet">

  <!-- Leaflet Maps -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

  <link rel="stylesheet" href="/src/styles/main.css">
</head>

<body>
  <!-- ========================================
       TELA: SPLASH
       ======================================== -->
  <div id="screen-splash" class="screen active">
    <div class="splash-content">

      <div class="splash-loading">
        <div class="loading-bar">
          <div class="loading-fill" id="splash-progress"></div>
        </div>
        <p class="loading-text" id="splash-status">Carregando...</p>
      </div>
    </div>
  </div>

  <!-- ========================================
       TELA: HOME (Base de OperaÃ§Ãµes)
       ======================================== -->
  <div id="screen-home" class="screen hidden">
    <div class="home-header">
      <div class="player-info">
        <div class="player-avatar">ğŸ§”</div>
        <div class="player-details">
          <span class="player-name">CaÃ§ador</span>
          <span class="player-level">NÃ­vel 1</span>
        </div>
      </div>
      <button class="btn-icon" id="btn-profile" style="background: none; border: none; padding: 0;">
        <img src="/images/icon-config.png" alt="Config" style="width: 100%; height: 100%; object-fit: contain;">
      </button>
    </div>

    <div class="home-title">
      <span class="pentagram-small">â›§</span>
      <h2>Base de OperaÃ§Ãµes</h2>
    </div>

    <div class="home-menu">
      <button class="menu-card primary" id="btn-start-hunt">
        <img src="/images/icon-cacada.png" alt="CaÃ§ada" class="img-btn">
      </button>

      <div class="menu-grid">
        <button class="menu-card" id="btn-map">
          <img src="/images/icon-mapa.png" alt="Mapa" class="img-btn">
        </button>
        <button class="menu-card" id="btn-inventory">
          <img src="/images/icon-inventario.png" alt="InventÃ¡rio" class="img-btn">
        </button>
        <button class="menu-card" id="btn-bestiary">
          <img src="/images/icon-casos.png" alt="Casos" class="img-btn">
        </button>
        <button class="menu-card" id="btn-diary">
          <img src="/images/icon-diario.png" alt="DiÃ¡rio" class="img-btn">
        </button>
      </div>
    </div>

    <div class="home-stats">
      <div class="stat-item">
        <span class="stat-value" id="stat-monsters">0</span>
        <span class="stat-label">Monstros</span>
      </div>
      <div class="stat-item">
        <span class="stat-value" id="stat-hunts">0</span>
        <span class="stat-label">CaÃ§adas</span>
      </div>
      <div class="stat-item">
        <span class="stat-value" id="stat-items">0</span>
        <span class="stat-label">Itens</span>
      </div>
    </div>
  </div>

  <!-- ========================================
       TELA: MAPA
       ======================================== -->
  <div id="screen-map" class="screen hidden">
    <div class="screen-header">
      <button class="btn-back" id="btn-back-map" style="background: none; border: none; padding: 0;">
        <img src="/images/icon-voltar.png" alt="Voltar" style="width: 100%; height: 100%; object-fit: contain;">
      </button>
      <img src="/images/icon-mapa.png" alt="Mapa" style="height: 40px; object-fit: contain;">
    </div>
    <div class="map-container" id="map-container">
      <div id="full-map"></div>
    </div>
    <div class="map-legend">
      <div class="legend-item"><span class="dot red"></span> Monstros</div>
      <div class="legend-item"><span class="dot yellow"></span> Loot</div>
      <div class="legend-item"><span class="dot blue"></span> VocÃª</div>
    </div>
  </div>

  <!-- ========================================
       TELA: INVENTÃRIO (Full)
       ======================================== -->
  <div id="screen-inventory" class="screen hidden">
    <div class="screen-header">
      <button class="btn-back" id="btn-back-inventory">â†</button>
      <h2>ğŸ’ InventÃ¡rio</h2>
    </div>
    <div class="inventory-tabs-full">
      <button class="inv-tab active" data-tab="weapons">âš”ï¸ Armas</button>
      <button class="inv-tab" data-tab="accessories">ğŸ”§ AcessÃ³rios</button>
      <button class="inv-tab" data-tab="healing">ğŸ’Š Cura</button>
    </div>
    <div class="inventory-content" id="inventory-full-grid">
      <!-- Items renderizados via JS -->
    </div>
  </div>

  <!-- ========================================
       TELA: BESTIÃRIO (Casos)
       ======================================== -->
  <div id="screen-bestiary" class="screen hidden">
    <div class="screen-header">
      <button class="btn-back" id="btn-back-bestiary">â†</button>
      <h2>ğŸ“– Casos</h2>
    </div>

    <div class="bestiary-filters">
      <button class="bestiary-filter active" data-filter="all">Todos</button>
      <button class="bestiary-filter" data-filter="defeated">Derrotados</button>
      <button class="bestiary-filter" data-filter="unknown">Desconhecidos</button>
    </div>

    <div class="bestiary-list" id="bestiary-list">
      <!-- Monstros renderizados via JS -->
    </div>

    <!-- Modal de Detalhes do Monstro -->
    <div class="monster-detail-overlay" id="monster-detail-overlay">
      <div class="monster-detail-panel">
        <button class="monster-detail-close" id="monster-detail-close">âœ•</button>

        <div class="monster-detail-header">
          <div class="monster-detail-icon" id="detail-icon">ğŸ‘»</div>
          <div class="monster-detail-title">
            <h2 id="detail-name">Fantasma</h2>
            <span class="monster-detail-type" id="detail-type">EspÃ­rito</span>
          </div>
          <div class="monster-detail-danger" id="detail-danger">
            <span class="danger-label">Perigo</span>
            <div class="danger-skulls" id="detail-skulls">ğŸ’€ğŸ’€ğŸ’€</div>
          </div>
        </div>

        <div class="monster-detail-status" id="detail-status">
          <span class="status-badge unknown">Desconhecido</span>
        </div>

        <div class="monster-detail-section">
          <h3>ğŸ“œ Lore</h3>
          <p id="detail-lore">DescriÃ§Ã£o do monstro...</p>
        </div>

        <div class="monster-detail-section">
          <h3>âš”ï¸ Fraquezas</h3>
          <div class="weakness-list" id="detail-weaknesses">
            <!-- Fraquezas renderizadas via JS -->
          </div>
        </div>

        <div class="monster-detail-section">
          <h3>ğŸ›¡ï¸ Imunidades</h3>
          <div class="immunity-list" id="detail-immunities">
            <!-- Imunidades renderizadas via JS -->
          </div>
        </div>

        <div class="monster-detail-section tips-section">
          <h3>ğŸ’¡ Dicas de CaÃ§a</h3>
          <p id="detail-tips">Dicas para derrotar o monstro...</p>
        </div>

        <div class="monster-detail-stats">
          <div class="detail-stat">
            <span class="stat-number" id="detail-encounters">0</span>
            <span class="stat-text">Encontros</span>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- ========================================
       TELA: DIÃRIO
       ======================================== -->
  <div id="screen-diary" class="screen hidden">
    <div class="screen-header">
      <button class="btn-back" id="btn-back-diary">â†</button>
      <h2>ğŸ““ DiÃ¡rio</h2>
    </div>
    <div class="diary-entries" id="diary-entries">
      <div class="diary-empty">
        <p>ğŸ“ Seu diÃ¡rio estÃ¡ vazio</p>
        <p class="small">Eventos de caÃ§ada aparecerÃ£o aqui</p>
      </div>
    </div>
  </div>

  <!-- ========================================
       TELA: PERFIL
       ======================================== -->
  <div id="screen-profile" class="screen hidden">
    <div class="screen-header">
      <button class="btn-back" id="btn-back-profile">â†</button>
      <h2>âš™ï¸ Perfil</h2>
    </div>
    <div class="profile-content">
      <div class="profile-card">
        <div class="profile-avatar">ğŸ§”</div>
        <input type="text" class="profile-name-input" id="profile-name" placeholder="Nome do CaÃ§ador" value="CaÃ§ador">
      </div>
      <div class="profile-stats">
        <h3>EstatÃ­sticas</h3>
        <div class="stat-row">
          <span>Monstros derrotados</span>
          <span id="profile-monsters">0</span>
        </div>
        <div class="stat-row">
          <span>CaÃ§adas realizadas</span>
          <span id="profile-hunts">0</span>
        </div>
        <div class="stat-row">
          <span>Itens coletados</span>
          <span id="profile-items">0</span>
        </div>
      </div>
      <div class="profile-settings">
        <h3>ConfiguraÃ§Ãµes</h3>
        <div class="setting-row">
          <span>Som</span>
          <label class="toggle">
            <input type="checkbox" id="setting-sound" checked>
            <span class="slider"></span>
          </label>
        </div>
        <div class="setting-row">
          <span>VibraÃ§Ã£o</span>
          <label class="toggle">
            <input type="checkbox" id="setting-vibration" checked>
            <span class="slider"></span>
          </label>
        </div>
      </div>
    </div>
  </div>

  <!-- ========================================
       TELA: HUNT (Modo AR)
       ======================================== -->
  <div id="screen-hunt" class="screen hidden">
    <!-- A-Frame Scene -->
    <a-scene id="ar-scene" vr-mode-ui="enabled: false" embedded
      webxr="requiredFeatures: hit-test, local-floor; optionalFeatures: dom-overlay, anchors; overlayElement: #ar-hud;"
      renderer="colorManagement: true; physicallyCorrectLights: true; alpha: true;" background="color: transparent"
      ar-hit-test="target: #reticle; type: footprint;">

      <a-assets>
        <a-asset-item id="werewolf-model" src="/werewolf.glb"></a-asset-item>
        <a-asset-item id="vampire-model" src="/vampire.glb"></a-asset-item>
        <a-asset-item id="ghost-model" src="/ghost.glb"></a-asset-item>
        <a-asset-item id="demon-model" src="/demon.glb"></a-asset-item>
        <a-asset-item id="wendigo-model" src="/wendigo.glb"></a-asset-item>
        <!-- Loot Models -->
        <a-asset-item id="holy-water-model" src="/holy-water.glb"></a-asset-item>
        <a-asset-item id="salt-model" src="/salt.glb"></a-asset-item>
        <a-asset-item id="knife-model" src="/knife.glb"></a-asset-item>
        <a-asset-item id="shotgun-model" src="/shotgun.glb"></a-asset-item>
        <a-asset-item id="crowbar-model" src="/crowbar.glb"></a-asset-item>
        <a-asset-item id="colt-model" src="/colt.glb"></a-asset-item>
        <a-asset-item id="selo-model" src="/selo.glb"></a-asset-item>
        <a-asset-item id="bible-model" src="/bible.glb"></a-asset-item>
        <a-asset-item id="knife-angel-model" src="/knife-angel.glb"></a-asset-item>
        <a-asset-item id="knife-blood-model" src="/knife-blood.glb"></a-asset-item>
        <a-asset-item id="estaca-model" src="/estaca.glb"></a-asset-item>
        <a-asset-item id="molotov-model" src="/molotov.glb"></a-asset-item>
        <a-asset-item id="isqueiro-model" src="/isqueiro.glb"></a-asset-item>
      </a-assets>

      <a-light type="ambient" color="#fff" intensity="0.6"></a-light>
      <a-light type="directional" color="#fff" intensity="0.9" position="1 4 3"></a-light>

      <a-entity id="reticle" visible="false">
        <a-ring color="#00ff00" radius-inner="0.04" radius-outer="0.06" rotation="-90 0 0"
          material="shader: flat; opacity: 0.8;"></a-ring>
      </a-entity>

      <a-entity id="monsters-container"></a-entity>

      <a-entity id="camera-rig">
        <a-camera id="camera" position="0 1.6 0"></a-camera>
      </a-entity>
    </a-scene>

    <!-- Camera Filter Overlay -->
    <div id="camera-filter-overlay" class="camera-filter-overlay"></div>

    <!-- AR HUD Overlay -->
    <div id="ar-hud" class="ar-hud">
      <!-- Imagem da arma equipada (atrÃ¡s de tudo) -->
      <div class="ar-weapon-image" id="ar-weapon-image" style="display: none;">
        <img id="ar-weapon-img" src="" alt="">
      </div>

      <button class="ar-btn-exit" id="ar-exit">
        <img src="/images/icon-modoar.png" alt="Sair" style="width: 100%; height: 100%; object-fit: contain;">
      </button>

      <!-- HP do Jogador -->
      <div class="ar-player-hp supernatural-hp">
        <img src="/images/icon-jogador.png" alt="HP" class="hp-icon">
        <div class="hp-bar">
          <div class="hp-fill" id="ar-player-hp-fill"></div>
        </div>
        </br>
        <span class="hp-text" id="ar-player-hp-text">100/100</span>
      </div>

      <!-- HP do Monstro -->
      <div class="ar-monster-hp supernatural-monster-hp" id="ar-monster-hp">
        <div class="monster-hp-info">
          <div class="hp-bar">
            <div class="hp-fill enemy" id="ar-monster-hp-fill"></div>
          </div>
          <span class="monster-name" id="ar-monster-name">Monstro</span>
        </div>
        <img src="/images/icon-werewolf.png" alt="" class="monster-hp-icon" id="ar-monster-icon">
      </div>

      <div class="ar-crosshair"></div>
      <div class="ar-hit-feedback" id="ar-hit-feedback"></div>

      <!-- Radar de DireÃ§Ã£o (BÃºssola) -->
      <div class="ar-radar" id="ar-radar">
        <div class="radar-compass">
          <div class="radar-north">N</div>
          <div class="radar-center"></div>
          <div class="radar-ring"></div>
          <div class="radar-ring outer"></div>
        </div>
        <div class="radar-markers" id="radar-markers">
          <!-- Marcadores de monstros e loot serÃ£o adicionados via JS -->
        </div>
      </div>

      <div class="ar-location" id="ar-location">
        <span class="street">ğŸ“ Localizando...</span>
      </div>

      <div class="ar-slots">
        <div class="ar-slot weapon" id="ar-slot-weapon" data-type="weapon"><img src="/images/inventario-armas.png"
            alt="Armas"></div>
        <div class="ar-slot accessory" id="ar-slot-accessory" data-type="accessory"><img
            src="/images/inventario-assessorios.png" alt="AcessÃ³rios"></div>
        <div class="ar-slot healing" id="ar-slot-healing" data-type="healing"><img src="/images/inventario-cura.png"
            alt="Cura"></div>
      </div>

      <button class="ar-btn-fire" id="ar-fire">ğŸ”«</button>

      <!-- Quick Inventory Modal -->
      <div class="ar-inventory-modal" id="ar-inventory-modal">
        <div class="ar-inv-header">
          <span>Equipar Item</span>
          <button id="ar-inv-close">âœ•</button>
        </div>
        <div class="ar-inv-grid" id="ar-inv-grid"></div>
      </div>
    </div>
  </div>

  <script type="module" src="/src/main.js"></script>
</body>

</html>